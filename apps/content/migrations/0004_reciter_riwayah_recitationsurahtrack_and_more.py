# Generated by Django 5.2.6 on 2025-11-10 06:59

import django.core.validators
from django.db import migrations, models
import django.db.models.deletion

import apps.core.uploads


class Migration(migrations.Migration):
    dependencies = [
        ("content", "0003_assetpreview_description_assetpreview_title"),
    ]

    operations = [
        migrations.CreateModel(
            name="Reciter",
            fields=[
                (
                    "id",
                    models.AutoField(
                        help_text="Unique identifier for this record",
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, help_text="Timestamp when this record was created"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True, help_text="Timestamp when this record was last updated"
                    ),
                ),
                ("name", models.CharField(max_length=255, unique=True)),
                ("name_ar", models.CharField(max_length=255, unique=True)),
                ("slug", models.SlugField(unique=True)),
                ("is_active", models.BooleanField(default=True)),
            ],
            options={
                "abstract": False,
            },
        ),
        migrations.CreateModel(
            name="Riwayah",
            fields=[
                (
                    "id",
                    models.AutoField(
                        help_text="Unique identifier for this record",
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, help_text="Timestamp when this record was created"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True, help_text="Timestamp when this record was last updated"
                    ),
                ),
                ("name", models.CharField(max_length=255, unique=True)),
                ("name_ar", models.CharField(max_length=255, unique=True)),
                ("slug", models.SlugField(unique=True)),
                ("is_active", models.BooleanField(default=True)),
            ],
            options={
                "abstract": False,
            },
        ),
        migrations.CreateModel(
            name="RecitationSurahTrack",
            fields=[
                (
                    "id",
                    models.AutoField(
                        help_text="Unique identifier for this record",
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, help_text="Timestamp when this record was created"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True, help_text="Timestamp when this record was last updated"
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=True,
                        help_text="Whether this record is active (soft delete mechanism)",
                    ),
                ),
                (
                    "surah_number",
                    models.PositiveSmallIntegerField(help_text="Surah number (1..114)"),
                ),
                (
                    "surah_name",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("", "---------"),
                            ("Al-Fatihah", "Al-Fatihah"),
                            ("Al-Baqarah", "Al-Baqarah"),
                            ("Aal-Imran", "Aal-Imran"),
                            ("An-Nisa", "An-Nisa"),
                            ("Al-Maidah", "Al-Maidah"),
                            ("Al-Anam", "Al-Anam"),
                            ("Al-Araf", "Al-Araf"),
                            ("Al-Anfal", "Al-Anfal"),
                            ("At-Tawbah", "At-Tawbah"),
                            ("Yunus", "Yunus"),
                            ("Hud", "Hud"),
                            ("Yusuf", "Yusuf"),
                            ("Ar-Rad", "Ar-Rad"),
                            ("Ibrahim", "Ibrahim"),
                            ("Al-Hijr", "Al-Hijr"),
                            ("An-Nahl", "An-Nahl"),
                            ("Al-Isra", "Al-Isra"),
                            ("Al-Kahf", "Al-Kahf"),
                            ("Maryam", "Maryam"),
                            ("Ta-Ha", "Ta-Ha"),
                            ("Al-Anbiya", "Al-Anbiya"),
                            ("Al-Hajj", "Al-Hajj"),
                            ("Al-Muminun", "Al-Muminun"),
                            ("An-Nur", "An-Nur"),
                            ("Al-Furqan", "Al-Furqan"),
                            ("Ash-Shuara", "Ash-Shuara"),
                            ("An-Naml", "An-Naml"),
                            ("Al-Qasas", "Al-Qasas"),
                            ("Al-Ankabut", "Al-Ankabut"),
                            ("Ar-Rum", "Ar-Rum"),
                            ("Luqman", "Luqman"),
                            ("As-Sajdah", "As-Sajdah"),
                            ("Al-Ahzab", "Al-Ahzab"),
                            ("Saba", "Saba"),
                            ("Fatir", "Fatir"),
                            ("Ya-Sin", "Ya-Sin"),
                            ("As-Saffat", "As-Saffat"),
                            ("Sad", "Sad"),
                            ("Az-Zumar", "Az-Zumar"),
                            ("Ghafir", "Ghafir"),
                            ("Fussilat", "Fussilat"),
                            ("Ash-Shura", "Ash-Shura"),
                            ("Az-Zukhruf", "Az-Zukhruf"),
                            ("Ad-Dukhan", "Ad-Dukhan"),
                            ("Al-Jathiyah", "Al-Jathiyah"),
                            ("Al-Ahqaf", "Al-Ahqaf"),
                            ("Muhammad", "Muhammad"),
                            ("Al-Fath", "Al-Fath"),
                            ("Al-Hujurat", "Al-Hujurat"),
                            ("Qaf", "Qaf"),
                            ("Adh-Dhariyat", "Adh-Dhariyat"),
                            ("At-Tur", "At-Tur"),
                            ("An-Najm", "An-Najm"),
                            ("Al-Qamar", "Al-Qamar"),
                            ("Ar-Rahman", "Ar-Rahman"),
                            ("Al-Waqiah", "Al-Waqiah"),
                            ("Al-Hadid", "Al-Hadid"),
                            ("Al-Mujadila", "Al-Mujadila"),
                            ("Al-Hashr", "Al-Hashr"),
                            ("Al-Mumtahanah", "Al-Mumtahanah"),
                            ("As-Saff", "As-Saff"),
                            ("Al-Jumuah", "Al-Jumuah"),
                            ("Al-Munafiqun", "Al-Munafiqun"),
                            ("At-Taghabun", "At-Taghabun"),
                            ("At-Talaq", "At-Talaq"),
                            ("At-Tahrim", "At-Tahrim"),
                            ("Al-Mulk", "Al-Mulk"),
                            ("Al-Qalam", "Al-Qalam"),
                            ("Al-Haqqah", "Al-Haqqah"),
                            ("Al-Maarij", "Al-Maarij"),
                            ("Nuh", "Nuh"),
                            ("Al-Jinn", "Al-Jinn"),
                            ("Al-Muzzammil", "Al-Muzzammil"),
                            ("Al-Muddaththir", "Al-Muddaththir"),
                            ("Al-Qiyamah", "Al-Qiyamah"),
                            ("Al-Insan", "Al-Insan"),
                            ("Al-Mursalat", "Al-Mursalat"),
                            ("An-Naba", "An-Naba"),
                            ("An-Naziat", "An-Naziat"),
                            ("Abasa", "Abasa"),
                            ("At-Takwir", "At-Takwir"),
                            ("Al-Infitar", "Al-Infitar"),
                            ("Al-Mutaffifin", "Al-Mutaffifin"),
                            ("Al-Inshiqaq", "Al-Inshiqaq"),
                            ("Al-Buruj", "Al-Buruj"),
                            ("At-Tariq", "At-Tariq"),
                            ("Al-Ala", "Al-Ala"),
                            ("Al-Ghashiyah", "Al-Ghashiyah"),
                            ("Al-Fajr", "Al-Fajr"),
                            ("Al-Balad", "Al-Balad"),
                            ("Ash-Shams", "Ash-Shams"),
                            ("Al-Layl", "Al-Layl"),
                            ("Ad-Duha", "Ad-Duha"),
                            ("Ash-Sharh", "Ash-Sharh"),
                            ("At-Tin", "At-Tin"),
                            ("Al-Alaq", "Al-Alaq"),
                            ("Al-Qadr", "Al-Qadr"),
                            ("Al-Bayyinah", "Al-Bayyinah"),
                            ("Az-Zalzalah", "Az-Zalzalah"),
                            ("Al-Adiyat", "Al-Adiyat"),
                            ("Al-Qariah", "Al-Qariah"),
                            ("At-Takathur", "At-Takathur"),
                            ("Al-Asr", "Al-Asr"),
                            ("Al-Humazah", "Al-Humazah"),
                            ("Al-Fil", "Al-Fil"),
                            ("Quraysh", "Quraysh"),
                            ("Al-Maun", "Al-Maun"),
                            ("Al-Kawthar", "Al-Kawthar"),
                            ("Al-Kafirun", "Al-Kafirun"),
                            ("An-Nasr", "An-Nasr"),
                            ("Al-Masad", "Al-Masad"),
                            ("Al-Ikhlas", "Al-Ikhlas"),
                            ("Al-Falaq", "Al-Falaq"),
                            ("An-Nas", "An-Nas"),
                        ],
                        default="",
                        help_text="Surah name (English) - selectable. Auto-sync not enforced.",
                        max_length=255,
                    ),
                ),
                (
                    "surah_name_ar",
                    models.CharField(
                        blank=True,
                        choices=[
                            ("", "---------"),
                            ("الفاتحة", "الفاتحة"),
                            ("البقرة", "البقرة"),
                            ("آل عمران", "آل عمران"),
                            ("النساء", "النساء"),
                            ("المائدة", "المائدة"),
                            ("الانعام", "الانعام"),
                            ("الاعراف", "الاعراف"),
                            ("الانفال", "الانفال"),
                            ("التوبة", "التوبة"),
                            ("يونس", "يونس"),
                            ("هود", "هود"),
                            ("يوسف", "يوسف"),
                            ("الرعد", "الرعد"),
                            ("ابراهيم", "ابراهيم"),
                            ("الحجر", "الحجر"),
                            ("النحل", "النحل"),
                            ("الاسراء", "الاسراء"),
                            ("الكهف", "الكهف"),
                            ("مريم", "مريم"),
                            ("طه", "طه"),
                            ("الانبياء", "الانبياء"),
                            ("الحج", "الحج"),
                            ("المؤمنون", "المؤمنون"),
                            ("النور", "النور"),
                            ("الفرقان", "الفرقان"),
                            ("الشعراء", "الشعراء"),
                            ("النمل", "النمل"),
                            ("القصص", "القصص"),
                            ("العنكبوت", "العنكبوت"),
                            ("الروم", "الروم"),
                            ("لقمان", "لقمان"),
                            ("السجدة", "السجدة"),
                            ("الاحزاب", "الاحزاب"),
                            ("سبأ", "سبأ"),
                            ("فاطر", "فاطر"),
                            ("يس", "يس"),
                            ("الصافات", "الصافات"),
                            ("ص", "ص"),
                            ("الزمر", "الزمر"),
                            ("غافر", "غافر"),
                            ("فصلت", "فصلت"),
                            ("الشورى", "الشورى"),
                            ("الزخرف", "الزخرف"),
                            ("الدخان", "الدخان"),
                            ("الجاثية", "الجاثية"),
                            ("الاحقاف", "الاحقاف"),
                            ("محمد", "محمد"),
                            ("الفتح", "الفتح"),
                            ("الحجرات", "الحجرات"),
                            ("ق", "ق"),
                            ("الذاريات", "الذاريات"),
                            ("الطور", "الطور"),
                            ("النجم", "النجم"),
                            ("القمر", "القمر"),
                            ("الرحمن", "الرحمن"),
                            ("الواقعة", "الواقعة"),
                            ("الحديد", "الحديد"),
                            ("المجادلة", "المجادلة"),
                            ("الحشر", "الحشر"),
                            ("الممتحنة", "الممتحنة"),
                            ("الصف", "الصف"),
                            ("الجمعة", "الجمعة"),
                            ("المنافقون", "المنافقون"),
                            ("التغابن", "التغابن"),
                            ("الطلاق", "الطلاق"),
                            ("التحريم", "التحريم"),
                            ("الملك", "الملك"),
                            ("القلم", "القلم"),
                            ("الحاقة", "الحاقة"),
                            ("المعارج", "المعارج"),
                            ("نوح", "نوح"),
                            ("الجن", "الجن"),
                            ("المزمل", "المزمل"),
                            ("المدثر", "المدثر"),
                            ("القيامة", "القيامة"),
                            ("الانسان", "الانسان"),
                            ("المرسلات", "المرسلات"),
                            ("النبإ", "النبإ"),
                            ("النازعات", "النازعات"),
                            ("عبس", "عبس"),
                            ("التكوير", "التكوير"),
                            ("الانفطار", "الانفطار"),
                            ("المطففين", "المطففين"),
                            ("الانشقاق", "الانشقاق"),
                            ("البروج", "البروج"),
                            ("الطارق", "الطارق"),
                            ("الاعلى", "الاعلى"),
                            ("الغاشية", "الغاشية"),
                            ("الفجر", "الفجر"),
                            ("البلد", "البلد"),
                            ("الشمس", "الشمس"),
                            ("الليل", "الليل"),
                            ("الضحى", "الضحى"),
                            ("الشرح", "الشرح"),
                            ("التين", "التين"),
                            ("العلق", "العلق"),
                            ("القدر", "القدر"),
                            ("البينة", "البينة"),
                            ("الزلزلة", "الزلزلة"),
                            ("العاديات", "العاديات"),
                            ("القارعة", "القارعة"),
                            ("التكاثر", "التكاثر"),
                            ("العصر", "العصر"),
                            ("الهمزة", "الهمزة"),
                            ("الفيل", "الفيل"),
                            ("قريش", "قريش"),
                            ("الماعون", "الماعون"),
                            ("الكوثر", "الكوثر"),
                            ("الكافرون", "الكافرون"),
                            ("النصر", "النصر"),
                            ("المسد", "المسد"),
                            ("الاخلاص", "الاخلاص"),
                            ("الفلق", "الفلق"),
                            ("الناس", "الناس"),
                        ],
                        default="",
                        help_text="Surah name (Arabic) - selectable. Auto-sync not enforced.",
                        max_length=255,
                    ),
                ),
                (
                    "chapter_number",
                    models.PositiveSmallIntegerField(
                        blank=True, help_text="Juz/Chapter number (1..30)", null=True
                    ),
                ),
                (
                    "audio_file",
                    models.FileField(
                        help_text="Per-surah audio file (MP3)",
                        upload_to=apps.core.uploads.upload_to_asset_files,
                        validators=[
                            django.core.validators.FileExtensionValidator(
                                allowed_extensions=["mp3"]
                            )
                        ],
                    ),
                ),
                (
                    "duration_ms",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="Audio track duration in milliseconds (auto-calculated upon uploading file)",
                    ),
                ),
                (
                    "size_bytes",
                    models.PositiveBigIntegerField(
                        default=0,
                        help_text="Audio file size in bytes (auto-calculated upon uploading file)",
                    ),
                ),
                (
                    "asset",
                    models.ForeignKey(
                        help_text="Parent Asset representing the recitation set",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="recitation_tracks",
                        to="content.asset",
                    ),
                ),
            ],
        ),
        migrations.CreateModel(
            name="RecitationAyahTiming",
            fields=[
                (
                    "id",
                    models.AutoField(
                        help_text="Unique identifier for this record",
                        primary_key=True,
                        serialize=False,
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, help_text="Timestamp when this record was created"
                    ),
                ),
                (
                    "updated_at",
                    models.DateTimeField(
                        auto_now=True, help_text="Timestamp when this record was last updated"
                    ),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=True,
                        help_text="Whether this record is active (soft delete mechanism)",
                    ),
                ),
                (
                    "ayah_key",
                    models.CharField(
                        help_text='Format "surah_number:ayah_number" e.g. "2:255"', max_length=20
                    ),
                ),
                ("start_ms", models.PositiveIntegerField(help_text="Start offset in milliseconds")),
                ("end_ms", models.PositiveIntegerField(help_text="End offset in milliseconds")),
                (
                    "duration_ms",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="Duration in milliseconds (auto-calculated as end_ms - start_ms)",
                    ),
                ),
                (
                    "track",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="ayah_timings",
                        to="content.recitationsurahtrack",
                    ),
                ),
            ],
        ),
        migrations.AddField(
            model_name="asset",
            name="reciter",
            field=models.ForeignKey(
                blank=True,
                help_text="Reciter for recitation assets",
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name="assets",
                to="content.reciter",
            ),
        ),
        migrations.AddField(
            model_name="asset",
            name="riwayah",
            field=models.ForeignKey(
                blank=True,
                help_text="Riwayah for recitation assets",
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name="assets",
                to="content.riwayah",
            ),
        ),
        migrations.AddIndex(
            model_name="recitationsurahtrack",
            index=models.Index(
                fields=["asset", "surah_number"], name="content_rec_asset_i_52c97d_idx"
            ),
        ),
        migrations.AlterUniqueTogether(
            name="recitationsurahtrack",
            unique_together={("asset", "surah_number")},
        ),
        migrations.AlterUniqueTogether(
            name="recitationayahtiming",
            unique_together={("track", "ayah_key")},
        ),
    ]
